
;;;
; portals
;;;
; in bank 'BANK_PORTALS'

; for rendering and movement checks
MEM_PORTALS_SECTOR = $BF00

; for rendering
MEM_PORTALS_X0 = $BF40
MEM_PORTALS_X1 = $BF80
MEM_PORTALS_SPRITE = $BFC0

MEM_PORTALS_MASKED = $BEF0

; for movement checks
MEM_PORTALS_ISLINK = MEM_PORTALS_X0
MEM_PORTALS_TOUCH = MEM_PORTALS_X1

;;;
; special thing types
;;;

THING_TYPE_PLAYER_N = 127
THING_TYPE_PLAYER_C = 126
THING_TYPE_PLAYER_S = 125
THING_TYPE_PLAYER_F = 124

THING_WEAPON_COUNT = 12
THING_WEAPON_FIRST = 112

;;;
; ticker functions
;;;

TICKER_FUNC_THING = 2
TICKER_FUNC_PLAYER = 4

;;;
; tick command bits
;;;

TCMD_GO_DOWN = $01	; forced by code
TCMD_ATK = $02	; forced by code (mouse input)
TCMD_ALT = $04	; forced by code (mouse input)
TCMD_USE = $08	; forced by code (mouse input)
TCMD_GO_UP = $40	; forced by code
TCMD_MOVING = $80	; forced by code

;;;
; function arguments
;;;

ARG_THING_X_S = $02
ARG_THING_X_L = $03
ARG_THING_X_H = $04
ARG_THING_Y_S = $05
ARG_THING_Y_L = $06
ARG_THING_Y_H = $07
ARG_THING_Z_S = $08
ARG_THING_Z_L = $09
ARG_THING_Z_H = $0A
ARG_THING_SECTOR = $0B
ARG_THING_TYPE = $0C
ARG_THING_IDX = $0D

;;;
; function arguments for 'text'
;;;

ARG_TEXT_PTR_L = $02
ARG_TEXT_PTR_H = $03
ARG_TEXT_X = $04
ARG_TEXT_Y = $05
ARG_TEXT_C = $06

RET_TEXT_LEN = $0F

;;;
; texture info structure
;;;
; there are 128 texture slots
; wall and plane texture info is different

TEXINFO_STRUCT_NHASH_0 = $A000
TEXINFO_STRUCT_NHASH_1 = $A080
TEXINFO_STRUCT_NHASH_2 = $A100
TEXINFO_STRUCT_NHASH_3 = $A180
TEXINFO_STRUCT_VHASH_0 = $A200
TEXINFO_STRUCT_VHASH_1 = $A280
TEXINFO_STRUCT_VHASH_2 = $A300
TEXINFO_STRUCT_VHASH_3 = $A380
TEXINFO_STRUCT_TYPE = $A400

; plane 'resolution' and data source
TEXINFO_STRUCT_P_TILE_DATA = $B700
TEXINFO_STRUCT_P_TILE_MAP = $B780

; effect field is shared with planes and walls
; walls support only 'animation' effect
TEXINFO_STRUCT_EFFECT_0 = $A500
TEXINFO_STRUCT_EFFECT_1 = $A580
TEXINFO_STRUCT_EFFECT_2 = $A600
TEXINFO_STRUCT_EFFECT_3 = $A680

; wall resolution and column offsets
TEXINFO_STRUCT_W_COLS_L = $AF00
TEXINFO_STRUCT_W_COLS_H = $AF80

; colormap offsets for each light
TEXINFO_STRUCT_P_COLORMAP = $B000	; 16 x 128 etries, LO and HI bytes

; base data offsets for each light
TEXINFO_STRUCT_W_DATA_LH = $B000	; 2 x 16 x 128 entries

;;;
; sprite info structure
;;;
; rotation offsets are forced by code
; stored in 'BANK_TSPR_INFO'

SPRINFO_STRUCT_ROT0_L = $A000
SPRINFO_STRUCT_ROT1_L = $A100
SPRINFO_STRUCT_ROT2_L = $A200
SPRINFO_STRUCT_ROT3_L = $A300
SPRINFO_STRUCT_ROT4_L = $A400
SPRINFO_STRUCT_ROT5_L = $A500
SPRINFO_STRUCT_ROT6_L = $A600
SPRINFO_STRUCT_ROT7_L = $A700

SPRINFO_STRUCT_ROT0_H = $A800
SPRINFO_STRUCT_ROT1_H = $A900
SPRINFO_STRUCT_ROT2_H = $AA00
SPRINFO_STRUCT_ROT3_H = $AB00
SPRINFO_STRUCT_ROT4_H = $AC00
SPRINFO_STRUCT_ROT5_H = $AD00
SPRINFO_STRUCT_ROT6_H = $AE00
SPRINFO_STRUCT_ROT7_H = $AF00

SPRINFO_STRUCT_ROTATE = $B000

;;;
; sprite frame structure
;;;
; stored in 'BANK_SPRITE_GFX'

SPRFRM_STRUCT_WIDTH = $B000
SPRFRM_STRUCT_HEIGHT = $B100
SPRFRM_STRUCT_OX = $B200
SPRFRM_STRUCT_OY = $B300
SPRFRM_STRUCT_OFFS_COLS_L = $B400
SPRFRM_STRUCT_OFFS_COLS_H = $B500
SPRFRM_STRUCT_OFFS_DATA_L = $B600
SPRFRM_STRUCT_OFFS_DATA_H = $B700

;;;
; player start structure
;;;

PLRSTART_STRUCT_X_L = $B000
PLRSTART_STRUCT_X_H = $B100
PLRSTART_STRUCT_Y_L = $B200
PLRSTART_STRUCT_Y_H = $B300
PLRSTART_STRUCT_Z_L = $B400
PLRSTART_STRUCT_Z_H = $B500
PLRSTART_STRUCT_SECTOR = $B600
PLRSTART_STRUCT_ANGLE = $B700
PLRSTART_STRUCT_PITCH = $B800
PLRSTART_STRUCT_FLAGS = $B900

;;;
; thing type structure
;;;

; there are 128 thing types
; thing info properties start at $00
; thing animation and sprite stuff starts at $80
; this is forced by ASM implementation
; spawn slots must be first

THTYPE_STRUCT_SPAWN_A = $A000
THTYPE_STRUCT_SPAWN_B = $A100
THTYPE_STRUCT_SPAWN_C = $A200
THTYPE_STRUCT_SPAWN_D = $A300
THTYPE_STRUCT_RADIUS = $A400
THTYPE_STRUCT_HEIGHT = $A500
THTYPE_STRUCT_BLOCKING = $A600
THTYPE_STRUCT_DTH_BLING = $A700
THTYPE_STRUCT_BLOCKEDBY = $A800
THTYPE_STRUCT_DTH_BLBY = $A900
THTYPE_STRUCT_IMASS = $AA00
THTYPE_STRUCT_GRAVITY = $AB00
THTYPE_STRUCT_SPEED = $AC00
THTYPE_STRUCT_EFLAGS = $AD00
THTYPE_STRUCT_HEALTH_L = $AE00
THTYPE_STRUCT_HEALTH_H = $AF00
THTYPE_STRUCT_SCALE = $B000
THTYPE_STRUCT_STEP_HEIGHT = $B100
THTYPE_STRUCT_WATER_HEIGHT = $B200
THTYPE_STRUCT_VIEW_HEIGHT = $B300
THTYPE_STRUCT_ATK_HEIGHT = $B400
THTYPE_STRUCT_ALT_RADIUS = $B500
THTYPE_STRUCT_PAIN_CHANCE = $B600
THTYPE_STRUCT_JUMPZ = $B700

THTYPE_ANIM_SPAWN_L = $A080
THTYPE_ANIM_SPAWN_H = $A880
THTYPE_ANIM_PAIN_L = $A180
THTYPE_ANIM_PAIN_H = $A980
THTYPE_ANIM_DEATH_L = $A280
THTYPE_ANIM_DEATH_H = $AA80

THTYPE_ANIM_READY_L = $A380
THTYPE_ANIM_READY_H = $AB80
THTYPE_ANIM_ATK_L = $A480
THTYPE_ANIM_ATK_H = $AC80
THTYPE_ANIM_ALT_L = $A580
THTYPE_ANIM_ALT_H = $AD80
THTYPE_ANIM_RAISE_L = $A680
THTYPE_ANIM_RAISE_H = $AE80
THTYPE_ANIM_LOWER_L = $A780
THTYPE_ANIM_LOWER_H = $AF80

THTYPE_ANIM_L = THTYPE_ANIM_SPAWN_L
THTYPE_ANIM_H = THTYPE_ANIM_SPAWN_H
THTYPE_ANIM_C = $B080

; sprite name hashes
THTYPE_SHASH_0 = $B880
THTYPE_SHASH_1 = $B980
THTYPE_SHASH_2 = $BA80
THTYPE_SHASH_3 = $BB80

; thing name hashes
THTYPE_NHASH_0 = $BC80
THTYPE_NHASH_1 = $BD80
THTYPE_NHASH_2 = $BE80
THTYPE_NHASH_3 = $BF80

THTYPE_ANIM_COUNT = 8

;;;
; thing state structure
;;;
; stored in 'BANK_THING_STATES'

THSTATE_STRUCT_ACTION = $B800
THSTATE_STRUCT_NEXT = $B900
THSTATE_STRUCT_FRM_NXT = $BA00
THSTATE_STRUCT_SPRITE = $BB00
THSTATE_STRUCT_TICKS = $BC00
THSTATE_STRUCT_ARG0 = $BD00
THSTATE_STRUCT_ARG1 = $BE00
THSTATE_STRUCT_ARG2 = $BF00

;;;
; weapon part structure
;;;

WPART__STRUCT_SIZE = $04

;;;
; internal thing flags
;;;

THING_IFLAG_NOJUMP = $01	; forced by code
THING_IFLAG_GOTHIT = $02
THING_IFLAG_CORPSE = $04
THING_IFLAG_USED = $20
THING_IFLAG_JUMPED = $40	; forced by code
THING_IFLAG_HEIGHTCHECK = $80	; forced by code

THING_EFLAG_PROJECTILE = $80	; forced by code
THING_EFLAG_CLIMBABLE = $40	; forced by code
THING_EFLAG_SPRCLIP = $20
THING_EFLAG_NORADIUS = $10
THING_EFLAG_WATERSPEC = $04
THING_EFLAG_NOPUSH = $02
THING_EFLAG_PUSHABLE = $01	; forced by code

;;;
; ticker structure
;;;
; limit: 64 bytes (128 slots)
; stored in 'BANK_TICKER_STRUCT'

; ticker base structure is common
TICKER_STRUCT_FUNC = $A000
TICKER_STRUCT_NEXT = $A080
TICKER_STRUCT_PREV = $A100
TICKER_STRUCT_TYPE = $A180

;;;
;; ticker: thing
; copied values

THING_STRUCT_SPRITE = $A200
THING_STRUCT_TICKS = $A280
THING_STRUCT_NXTFRM_L = $A300
THING_STRUCT_NXTFRM_H = $A380

THING_STRUCT_RADIUS = $A400
THING_STRUCT_HEIGHT = $A480
THING_STRUCT_GRAVITY = $A500

THING_STRUCT_BLOCKING = $A580
THING_STRUCT_BLOCKEDBY = $A600

THING_STRUCT_SCALE = $A680

THING_STRUCT_HEALTH_L = $A700
THING_STRUCT_HEALTH_H = $A780

THING_STRUCT_EFLAGS = $A800

THING_STRUCT_TH_ORIGIN = $A880

THING_STRUCT_X_S = $A900
THING_STRUCT_X_L = $A980
THING_STRUCT_X_H = $AA00
THING_STRUCT_Y_S = $AA80
THING_STRUCT_Y_L = $AB00
THING_STRUCT_Y_H = $AB80
THING_STRUCT_Z_S = $AC00
THING_STRUCT_Z_L = $AC80
THING_STRUCT_Z_H = $AD00

THING_STRUCT_VIEW_HEIGHT = $AD80

THING_STRUCT_FLOORS = $AE00
THING_STRUCT_CEILS = $AE80

; zeroed values

THING_STRUCT_MX_S = $AF00
THING_STRUCT_MX_L = $AF80
THING_STRUCT_MY_S = $B000
THING_STRUCT_MY_L = $B080
THING_STRUCT_MZ_S = $B100
THING_STRUCT_MZ_L = $B180

THING_STRUCT_ANGLE = $B200
THING_STRUCT_PITCH = $B280

THING_STRUCT_IFLAGS = $B300

THING_STRUCT_FLOORZ_L = $B380
THING_STRUCT_FLOORZ_H = $B400
THING_STRUCT_CEILZ_L = $B480
THING_STRUCT_CEILZ_H = $B500

THING_STRUCT_FLOORT = $B580
THING_STRUCT_CEILT = $B600

THING_STRUCT_TH_TARGET = $B680

THING_STRUCT_COUNTER = $B700

;
THING_STRUCT_CLEAR_FIRST = $AF
THING_STRUCT_CLEAR_LAST = $B7

;;;
; wall structure
;;;
; only first half of each bank is used

WALL_STRUCT_VTX_X_L = $A000
WALL_STRUCT_VTX_X_H = $A100
WALL_STRUCT_VTX_Y_L = $A200
WALL_STRUCT_VTX_Y_H = $A300
WALL_STRUCT_DIST_X_L = $A400
WALL_STRUCT_DIST_X_H = $A500
WALL_STRUCT_DIST_Y_L = $A600
WALL_STRUCT_DIST_Y_H = $A700
WALL_STRUCT_ANGLE_L = $A800
WALL_STRUCT_ANGLE_H = $A900
WALL_STRUCT_NEXT = $AA00
WALL_STRUCT_BACKSECTOR = $AB00
WALL_STRUCT_TFLAGS = $AC00
WALL_STRUCT_TOP_TEX = $AD00
WALL_STRUCT_TOP_OX = $AE00
WALL_STRUCT_TOP_OY = $AF00
WALL_STRUCT_BOT_TEX = $A001
WALL_STRUCT_BOT_OX = $A101
WALL_STRUCT_BOT_OY = $A201
WALL_STRUCT_MID_TEX = $A301
WALL_STRUCT_MID_OX = $A401
WALL_STRUCT_MID_OY = $A501
WALL_STRUCT_BLOCKING = $A601
WALL_STRUCT_BLOCKMID = $A701
WALL_STRUCT_SPLIT_L = $A801
WALL_STRUCT_SPLIT_H = $A901
WALL_STRUCT_SPECIAL = $AA01

;
WALL_MARK_SWAP = $80	; forced by code
WALL_MARK_EXTENDED = $40
WALL_MARK_XORIGIN = $20

;
WALL_TFLAG_PEG_Y = 1	; forced by code
WALL_TFLAG_MIRROR_X = 2
WALL_TFLAG_MIRROR_Y_SWAP_XY = 4

WALL_TFLAG_MID_MIRROR_X = $08

;;;
; sector structure
;;;

SECTOR_STRUCT_FLOOR_HEIGHT_L = $A000
SECTOR_STRUCT_FLOOR_HEIGHT_H = $A100
SECTOR_STRUCT_FLOOR_TEXTURE = $A200
SECTOR_STRUCT_FLOOR_OX = $A300
SECTOR_STRUCT_FLOOR_OY = $A400
SECTOR_STRUCT_FLOOR_SX = $A500
SECTOR_STRUCT_FLOOR_SY = $A600
SECTOR_STRUCT_FLOOR_ANG = $A700
SECTOR_STRUCT_FLOOR_LINK = $A800
SECTOR_STRUCT_CEILING_HEIGHT_L = $A900
SECTOR_STRUCT_CEILING_HEIGHT_H = $AA00
SECTOR_STRUCT_CEILING_TEXTURE = $AB00
SECTOR_STRUCT_CEILING_OX = $AC00
SECTOR_STRUCT_CEILING_OY = $AD00
SECTOR_STRUCT_CEILING_SX = $AE00
SECTOR_STRUCT_CEILING_SY = $AF00
SECTOR_STRUCT_CEILING_ANG = $B000
SECTOR_STRUCT_CEILING_LINK = $B100
SECTOR_STRUCT_WALL_BANK = $B200
SECTOR_STRUCT_WALL_FIRST = $B300
SECTOR_STRUCT_FLAGS = $B400
SECTOR_STRUCT_FLOOR_DIST = $B500
SECTOR_STRUCT_FLOOR_MASKED = $B600

; internal
SECTOR_STRUCT_MASKBLOCK = $BF00

; flags
SECTOR_FLAG_WATER = $80	; forced by code
